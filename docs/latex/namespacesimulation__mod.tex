\hypertarget{namespacesimulation__mod}{}\section{simulation\+\_\+mod Module Reference}
\label{namespacesimulation__mod}\index{simulation\+\_\+mod@{simulation\+\_\+mod}}


Module to hold the simulation class and its methods. This is the only class that is exposed to an external program, as it encapsulates every other class and method.  


\subsection*{Data Types}
\begin{DoxyCompactItemize}
\item 
type \mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}
\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a73bd78c4ac76c51f1e10f5847c25c4df}{run}} (self)
\begin{DoxyCompactList}\small\item\em Simulation run method. Runs the initialized case main time cycle. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940}{initsimulation}} (self, casefilename, outpath)
\begin{DoxyCompactList}\small\item\em Simulation initialization method. Effectively builds and populates the simulation objects that will be used latter on. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a87a5141e4516b9610a6e4f0d2ff2d719}{togglesources}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to activate and deactivate Sources based on the GlobalsSim\+TimeCurr\+Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a13aa0745f4601e3f418143dab2f18276}{blocksemitt}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to emitt tracers at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a058892630af07fc0fe8a4bffec531c6a}{blocksdistribute}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to distribute Tracers at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a8390f0a56ff2678d144af1dd09517a5e}{blocksconsolidate}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to consolidate the Tracer array at current Time and optimize background memory useage. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a2fbc294996a615647983ec637b83cfc0}{blockstracerstosv}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to build their State Vector (SV) from the Tracer list at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_ab2e7a1b0f131ab6fe40454d32cb3e24f}{blocksrunsolver}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to run the Solver at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a5eeea0cb6e0e94c5fd0336a13d635866}{blockssvtotracers}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to decode their State Vector (SV) back to the Tracer objects on the list at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a4cec8fb4baf1b2f69cd2699b0c5b9a55}{blockscleansv}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to clean their State Vector (SV) at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a844f0fae91502f3fc79cc1223f55a86c}{updatesimdatetime}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to update the date and time variables. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a629f51ee8ca4d2ece7f039a0114b1ef4}{inputdata}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the input streamer reading methods at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a5735e9ecb39f15061f3d766b0de7809d}{outputstepdata}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the output streamer writting methods at current Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a447c6d709de6aa360a65d39d660e627b}{setinitialstate}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to distribute the Sources to the Blocks, allocate the respective Tracers and redistribute if needed. \end{DoxyCompactList}\item 
integer function \mbox{\hyperlink{namespacesimulation__mod_a0ad485eab624ffa4df282f1da8d9f214}{gettracertotals}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to count Tracer numbers. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_aba126a8e0575cabb3bef6ab395002b3c}{printtracertotals}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to count Tracer numbers. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_acc5fa823c8dd599de8feda8988c224f2}{settracermemory}} (self, ntrc)
\begin{DoxyCompactList}\small\item\em Simulation method to account for Tracer memory consumption. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c}{decomposedomain}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to do domain decomposition and define the Blocks. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a4285722eaa589fa671233554b54c74f8}{closesimulation}} (self)
\begin{DoxyCompactList}\small\item\em Simulation finishing method. Closes output files and writes the final messages. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Module to hold the simulation class and its methods. This is the only class that is exposed to an external program, as it encapsulates every other class and method. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas 
\end{DoxyAuthor}


\subsection{Function/\+Subroutine Documentation}
\mbox{\Hypertarget{namespacesimulation__mod_a4cec8fb4baf1b2f69cd2699b0c5b9a55}\label{namespacesimulation__mod_a4cec8fb4baf1b2f69cd2699b0c5b9a55}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blockscleansv@{blockscleansv}}
\index{blockscleansv@{blockscleansv}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blockscleansv()}{blockscleansv()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blockscleansv (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to clean their State Vector (SV) at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 347 of file simulation.\+f90.


\begin{DoxyCode}
347     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
348     \textcolor{keywordtype}{integer} :: i
349     \textcolor{keyword}{call }self%timerSVOps%Tic()
350     \textcolor{comment}{!$OMP PARALLEL PRIVATE(i)}
351     \textcolor{comment}{!$OMP DO}
352     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
353         \textcolor{keyword}{call }sblock(i)%CleanSV()
354 \textcolor{keywordflow}{    enddo}
355     \textcolor{comment}{!$OMP END DO}
356     \textcolor{comment}{!$OMP END PARALLEL}
357     \textcolor{keyword}{call }self%timerSVOps%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a8390f0a56ff2678d144af1dd09517a5e}\label{namespacesimulation__mod_a8390f0a56ff2678d144af1dd09517a5e}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blocksconsolidate@{blocksconsolidate}}
\index{blocksconsolidate@{blocksconsolidate}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blocksconsolidate()}{blocksconsolidate()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blocksconsolidate (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to consolidate the Tracer array at current Time and optimize background memory useage. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 264 of file simulation.\+f90.


\begin{DoxyCode}
264     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
265     \textcolor{keywordtype}{integer} :: i
266     \textcolor{keyword}{call }self%timerPrep%Tic()
267     \textcolor{comment}{!$OMP PARALLEL PRIVATE(i)}
268     \textcolor{comment}{!$OMP DO}
269     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
270         \textcolor{keyword}{call }sblock(i)%ConsolidateArrays()
271         \textcolor{keyword}{call }sblock(i)%ShedMemory()
272 \textcolor{keywordflow}{    enddo}
273     \textcolor{comment}{!$OMP END DO}
274     \textcolor{comment}{!$OMP END PARALLEL}
275     \textcolor{keyword}{call }self%timerPrep%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a058892630af07fc0fe8a4bffec531c6a}\label{namespacesimulation__mod_a058892630af07fc0fe8a4bffec531c6a}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blocksdistribute@{blocksdistribute}}
\index{blocksdistribute@{blocksdistribute}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blocksdistribute()}{blocksdistribute()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blocksdistribute (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to distribute Tracers at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 247 of file simulation.\+f90.


\begin{DoxyCode}
247     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
248     \textcolor{keywordtype}{integer} :: i
249     \textcolor{keyword}{call }self%timerPrep%Tic()
250     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
251         \textcolor{keyword}{call }sblock(i)%DistributeTracers()
252 \textcolor{keywordflow}{    enddo}
253     \textcolor{keyword}{call }self%timerPrep%Toc()
254     \textcolor{comment}{!need to distribute Sources also! TODO}
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a13aa0745f4601e3f418143dab2f18276}\label{namespacesimulation__mod_a13aa0745f4601e3f418143dab2f18276}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blocksemitt@{blocksemitt}}
\index{blocksemitt@{blocksemitt}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blocksemitt()}{blocksemitt()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blocksemitt (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to emitt tracers at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 231 of file simulation.\+f90.


\begin{DoxyCode}
231     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
232     \textcolor{keywordtype}{integer} :: i
233     \textcolor{keyword}{call }self%timerPrep%Tic()
234     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
235         \textcolor{keyword}{call }sblock(i)%CallEmitter()
236 \textcolor{keywordflow}{    enddo}
237     \textcolor{keyword}{call }self%timerPrep%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_ab2e7a1b0f131ab6fe40454d32cb3e24f}\label{namespacesimulation__mod_ab2e7a1b0f131ab6fe40454d32cb3e24f}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blocksrunsolver@{blocksrunsolver}}
\index{blocksrunsolver@{blocksrunsolver}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blocksrunsolver()}{blocksrunsolver()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blocksrunsolver (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to run the Solver at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 305 of file simulation.\+f90.


\begin{DoxyCode}
305     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
306     \textcolor{keywordtype}{integer} :: i
307     \textcolor{keywordflow}{if} (globals%Sim%getnumdt() /= 1 ) \textcolor{keywordflow}{then}
308         \textcolor{keyword}{call }self%timerSolver%Tic()
309         \textcolor{comment}{!$OMP PARALLEL PRIVATE(i)}
310         \textcolor{comment}{!$OMP DO}
311         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
312             \textcolor{keyword}{call }sblock(i)%RunSolver()
313 \textcolor{keywordflow}{        enddo}
314         \textcolor{comment}{!$OMP END DO}
315         \textcolor{comment}{!$OMP END PARALLEL}
316         \textcolor{keyword}{call }self%timerSolver%Toc()
317 \textcolor{keywordflow}{    end if}
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a5eeea0cb6e0e94c5fd0336a13d635866}\label{namespacesimulation__mod_a5eeea0cb6e0e94c5fd0336a13d635866}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blockssvtotracers@{blockssvtotracers}}
\index{blockssvtotracers@{blockssvtotracers}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blockssvtotracers()}{blockssvtotracers()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blockssvtotracers (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to decode their State Vector (SV) back to the Tracer objects on the list at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 327 of file simulation.\+f90.


\begin{DoxyCode}
327     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
328     \textcolor{keywordtype}{integer} :: i
329     \textcolor{keyword}{call }self%timerSVOps%Toc()
330     \textcolor{comment}{!$OMP PARALLEL PRIVATE(i)}
331     \textcolor{comment}{!$OMP DO}
332     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
333         \textcolor{keyword}{call }sblock(i)%SVtoTracers()
334 \textcolor{keywordflow}{    enddo}
335     \textcolor{comment}{!$OMP END DO}
336     \textcolor{comment}{!$OMP END PARALLEL}
337     \textcolor{keyword}{call }self%timerSVOps%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a2fbc294996a615647983ec637b83cfc0}\label{namespacesimulation__mod_a2fbc294996a615647983ec637b83cfc0}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blockstracerstosv@{blockstracerstosv}}
\index{blockstracerstosv@{blockstracerstosv}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blockstracerstosv()}{blockstracerstosv()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blockstracerstosv (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to build their State Vector (SV) from the Tracer list at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 285 of file simulation.\+f90.


\begin{DoxyCode}
285     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
286     \textcolor{keywordtype}{integer} :: i
287     \textcolor{keyword}{call }self%timerSVOps%Tic()
288     \textcolor{comment}{!$OMP PARALLEL PRIVATE(i)}
289     \textcolor{comment}{!$OMP DO}
290     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
291         \textcolor{keyword}{call }sblock(i)%TracersToSV()
292 \textcolor{keywordflow}{    enddo}
293     \textcolor{comment}{!$OMP END DO}
294     \textcolor{comment}{!$OMP END PARALLEL}
295     \textcolor{keyword}{call }self%timerSVOps%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a4285722eaa589fa671233554b54c74f8}\label{namespacesimulation__mod_a4285722eaa589fa671233554b54c74f8}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!closesimulation@{closesimulation}}
\index{closesimulation@{closesimulation}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{closesimulation()}{closesimulation()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::closesimulation (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation finishing method. Closes output files and writes the final messages. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 498 of file simulation.\+f90.


\begin{DoxyCode}
498     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
499     \textcolor{keywordtype}{type}(string) :: outext
500     outext=\textcolor{stringliteral}{'Simulation ended, freeing resources. See you next time'}
501     \textcolor{keyword}{call }log%put(outext)
502     \textcolor{keyword}{call }log%finalize()
503     \textcolor{keyword}{call }self%OutputStreamer%finalize()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c}\label{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!decomposedomain@{decomposedomain}}
\index{decomposedomain@{decomposedomain}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{decomposedomain()}{decomposedomain()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::decomposedomain (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to do domain decomposition and define the Blocks. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 479 of file simulation.\+f90.


\begin{DoxyCode}
479     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
480     \textcolor{keywordtype}{type}(string) :: outext
481     \textcolor{keywordflow}{if} (globals%SimDefs%autoblocksize) \textcolor{keywordflow}{then}
482         \textcolor{keyword}{call }allocblocks(globals%SimDefs%numblocks)
483     \textcolor{keywordflow}{else}
484         outext=\textcolor{stringliteral}{'[DecomposeDomain]: Only automatic Block sizing at the moment, stoping'}
485         \textcolor{keyword}{call }log%put(outext)
486         stop
487 \textcolor{keywordflow}{    end if}
488     \textcolor{comment}{! Initializing the Blocks}
489     \textcolor{keyword}{call }setblocks(globals%SimDefs%autoblocksize,globals%SimDefs%numblocks,globals%SimDefs%numblocksx,
      globals%SimDefs%numblocksy)
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacesimulation__mod_a0ad485eab624ffa4df282f1da8d9f214}\label{namespacesimulation__mod_a0ad485eab624ffa4df282f1da8d9f214}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!gettracertotals@{gettracertotals}}
\index{gettracertotals@{gettracertotals}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{gettracertotals()}{gettracertotals()}}
{\footnotesize\ttfamily integer function simulation\+\_\+mod\+::gettracertotals (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to count Tracer numbers. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 429 of file simulation.\+f90.


\begin{DoxyCode}
429     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
430     \textcolor{keywordtype}{integer} :: i, total
431     total = 0
432     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
433         total = total + sblock(i)%numAllocTracers()
434 \textcolor{keywordflow}{    enddo}
435     gettracertotals = total
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940}\label{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!initsimulation@{initsimulation}}
\index{initsimulation@{initsimulation}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{initsimulation()}{initsimulation()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::initsimulation (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self,  }\item[{type(string), intent(in)}]{casefilename,  }\item[{type(string), intent(in)}]{outpath }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation initialization method. Effectively builds and populates the simulation objects that will be used latter on. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,casefilename,outpath} & \\
\hline
\mbox{\tt in}  & {\em casefilename} & case file name\\
\hline
\mbox{\tt in}  & {\em outpath} & Output path \\
\hline
\end{DoxyParams}


Definition at line 140 of file simulation.\+f90.


\begin{DoxyCode}
140     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
141     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: casefilename
142     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: outpath
143     \textcolor{keywordtype}{type}(string) :: outext, aux
144 
145     aux = \textcolor{stringliteral}{'Simulation::initialization'}
146     \textcolor{keyword}{call }self%timerInit%initialize(aux)
147     \textcolor{keyword}{call }self%timerInit%Tic()
148 
149     aux = \textcolor{stringliteral}{'Simulation::Total'}
150     \textcolor{keyword}{call }self%timerTotalRun%initialize(aux)
151     aux = \textcolor{stringliteral}{'Simulation::Input'}
152     \textcolor{keyword}{call }self%timerInput%initialize(aux)
153     aux = \textcolor{stringliteral}{'Simulation::Output'}
154     \textcolor{keyword}{call }self%timerOutput%initialize(aux)
155     aux = \textcolor{stringliteral}{'Simulation::Preparation'}
156     \textcolor{keyword}{call }self%timerPrep%initialize(aux)
157     aux = \textcolor{stringliteral}{'Simulation::SV encoding/decoding'}
158     \textcolor{keyword}{call }self%timerSVOps%initialize(aux)
159     aux = \textcolor{stringliteral}{'Simulation::Solver'}
160     \textcolor{keyword}{call }self%timerSolver%initialize(aux)
161 
162     \textcolor{comment}{! Initialize logger}
163     \textcolor{keyword}{call }log%initialize(outpath)
164     \textcolor{comment}{!Print licences and build info}
165     \textcolor{keyword}{call }printlicpreamble
166     \textcolor{comment}{!initialize parallel services manager}
167     \textcolor{keyword}{call }ompmanager%initialize()
168     \textcolor{comment}{!initializing memory log}
169     \textcolor{keyword}{call }simmemory%initialize()
170     \textcolor{comment}{!setting every global variable and input parameter to their default}
171     \textcolor{keyword}{call }globals%initialize(outpath = outpath)
172     \textcolor{comment}{!initializing geometry class}
173     \textcolor{keyword}{call }geometry%initialize()
174     \textcolor{comment}{!Check if case file has .xml extension}
175     \textcolor{keywordflow}{if} (casefilename%extension() == \textcolor{stringliteral}{'.xml'}) \textcolor{keywordflow}{then}
176         \textcolor{comment}{! Initialization routines to build the simulation from the input case file}
177         \textcolor{keyword}{call }initfromxml(casefilename)
178     \textcolor{keywordflow}{else}
179         outext=\textcolor{stringliteral}{'[initSimulation]: only .xml input files are supported at the time. Stopping'}
180         \textcolor{keyword}{call }log%put(outext)
181         stop
182 \textcolor{keywordflow}{    endif}
183     \textcolor{comment}{!Initializing input file streamer}
184     \textcolor{keyword}{call }self%InputStreamer%initialize()
185     \textcolor{keyword}{call }self%InputStreamer%print()
186     \textcolor{comment}{!Case was read and now we can build/initialize our simulation objects that are case-dependent}
187     \textcolor{comment}{!initilize simulation bounding box}
188     \textcolor{keyword}{call }bbox%initialize()
189     \textcolor{comment}{!decomposing the domain and initializing the Simulation Blocks}
190     \textcolor{keyword}{call }self%decompose()
191     \textcolor{comment}{!Distributing Sources}
192     \textcolor{keyword}{call }self%setInitialState()
193     \textcolor{comment}{!printing memory occupation at the time}
194     \textcolor{keyword}{call }simmemory%detailedprint()
195     \textcolor{comment}{!Initializing output file streamer}
196     \textcolor{keyword}{call }self%OutputStreamer%initialize()
197     \textcolor{comment}{!Writing the domain to file}
198     \textcolor{keyword}{call }self%OutputStreamer%WriteDomain(globals%Names%casename, bbox, geometry%getnumPoints(bbox), sblock)
199 
200     \textcolor{keyword}{call }self%timerInit%Toc()
201     \textcolor{keyword}{call }self%timerInit%print()
202 
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacesimulation__mod_a629f51ee8ca4d2ece7f039a0114b1ef4}\label{namespacesimulation__mod_a629f51ee8ca4d2ece7f039a0114b1ef4}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!inputdata@{inputdata}}
\index{inputdata@{inputdata}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{inputdata()}{inputdata()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::inputdata (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the input streamer reading methods at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 378 of file simulation.\+f90.


\begin{DoxyCode}
378     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
379     \textcolor{keyword}{call }self%timerInput%Tic()
380     \textcolor{keyword}{call }self%InputStreamer%loadDataFromStack(bbox, sblock)
381     \textcolor{keyword}{call }self%timerInput%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a5735e9ecb39f15061f3d766b0de7809d}\label{namespacesimulation__mod_a5735e9ecb39f15061f3d766b0de7809d}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!outputstepdata@{outputstepdata}}
\index{outputstepdata@{outputstepdata}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{outputstepdata()}{outputstepdata()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::outputstepdata (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the output streamer writting methods at current Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 391 of file simulation.\+f90.


\begin{DoxyCode}
391     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
392     \textcolor{keyword}{call }self%timerOutput%Tic()
393     \textcolor{keyword}{call }self%OutputStreamer%WriteStep(sblock, self%getTracerTotals(), self%timerTotalRun)
394     \textcolor{keyword}{call }self%timerOutput%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_aba126a8e0575cabb3bef6ab395002b3c}\label{namespacesimulation__mod_aba126a8e0575cabb3bef6ab395002b3c}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!printtracertotals@{printtracertotals}}
\index{printtracertotals@{printtracertotals}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{printtracertotals()}{printtracertotals()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::printtracertotals (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to count Tracer numbers. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 444 of file simulation.\+f90.


\begin{DoxyCode}
444     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
445     \textcolor{keywordtype}{type}(string) :: outext, temp
446     temp = self%getTracerTotals()
447     outext=\textcolor{stringliteral}{'-->'}//temp //\textcolor{stringliteral}{' Tracers allocated'}
448     \textcolor{keyword}{call }log%put(outext,.false.)
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a73bd78c4ac76c51f1e10f5847c25c4df}\label{namespacesimulation__mod_a73bd78c4ac76c51f1e10f5847c25c4df}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!run@{run}}
\index{run@{run}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::run (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation run method. Runs the initialized case main time cycle. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 85 of file simulation.\+f90.


\begin{DoxyCode}
85     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
86 
87     \textcolor{keyword}{call }self%OutputStreamer%writeOutputHeader()
88 
89     \textcolor{comment}{!main time cycle}
90     \textcolor{keywordflow}{do} \textcolor{keywordflow}{while} (globals%SimTime%CurrTime .lt. globals%Parameters%TimeMax)
91         \textcolor{keyword}{call }globals%Sim%increment\_numdt()
92         \textcolor{keyword}{call }self%timerTotalRun%Tic()
93         \textcolor{comment}{!activate suitable Sources}
94         \textcolor{keyword}{call }self%ToggleSources()
95         \textcolor{comment}{!emitt Tracers from active Sources}
96         \textcolor{keyword}{call }self%BlocksEmitt()
97         \textcolor{comment}{!Optimize Block Tracer lists and memory use}
98         \textcolor{keyword}{call }self%BlocksConsolidate()
99         \textcolor{comment}{!Distribute Tracers and Sources by Blocks}
100         \textcolor{keyword}{call }self%BlocksDistribute()
101         \textcolor{comment}{!Build SV}
102         \textcolor{keyword}{call }self%BlocksTracersToSV()
103         \textcolor{comment}{!load hydrodynamic fields from files (curents, wind, waves, ...)}
104         \textcolor{keyword}{call }self%InputData()
105         \textcolor{comment}{!Update all tracers - Integration step}
106         \textcolor{keyword}{call }self%BlocksRunSolver()
107         \textcolor{comment}{!SV to Tracers}
108         \textcolor{keyword}{call }self%BlocksSVtoTracers()
109         \textcolor{comment}{!Write results if time to do so}
110         \textcolor{keyword}{call }self%OutputStepData()
111         \textcolor{comment}{!Clean SV}
112         \textcolor{keyword}{call }self%BlocksCleanSV()
113         \textcolor{comment}{!update Simulation time}
114         \textcolor{keyword}{call }self%updateSimDateTime()
115         \textcolor{comment}{!print*, 'Global time is ', Globals%SimTime%CurrTime}
116         \textcolor{comment}{!print*, 'Can we continue?'}
117         \textcolor{comment}{!read (*,*)}
118         \textcolor{keyword}{call }self%timerTotalRun%Toc()
119 \textcolor{keywordflow}{    enddo}
120 
121     \textcolor{keyword}{call }self%setTracerMemory()
122     \textcolor{keyword}{call }simmemory%detailedprint()
123     \textcolor{keyword}{call }self%timerTotalRun%print()
124     \textcolor{keyword}{call }self%timerPrep%print()
125     \textcolor{keyword}{call }self%timerSVOps%print()
126     \textcolor{keyword}{call }self%timerSolver%print()
127     \textcolor{keyword}{call }self%timerInput%print()
128     \textcolor{keyword}{call }self%timerOutput%print()
129 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a447c6d709de6aa360a65d39d660e627b}\label{namespacesimulation__mod_a447c6d709de6aa360a65d39d660e627b}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!setinitialstate@{setinitialstate}}
\index{setinitialstate@{setinitialstate}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{setinitialstate()}{setinitialstate()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::setinitialstate (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to distribute the Sources to the Blocks, allocate the respective Tracers and redistribute if needed. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 404 of file simulation.\+f90.


\begin{DoxyCode}
404     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
405     \textcolor{keywordtype}{type}(string) :: outext
406     \textcolor{keywordtype}{integer} :: i, blk, ntrc
407     \textcolor{comment}{!iterate every Source to distribute}
408     ntrc = 0
409     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(tempsources%src)
410         blk = getblockindex(geometry%getCenter(tempsources%src(i)%par%geometry))
411         \textcolor{keyword}{call }sblock(blk)%putSource(tempsources%src(i))
412         ntrc = ntrc + tempsources%src(i)%stencil%total\_np
413 \textcolor{keywordflow}{    end do}
414     \textcolor{keyword}{call }tempsources%finalize() \textcolor{comment}{!destroying the temporary Sources now they are shipped to the Blocks}
415     outext=\textcolor{stringliteral}{'-->Sources allocated to their current Blocks'}
416     \textcolor{keyword}{call }log%put(outext,.false.)
417     outext = ntrc
418     outext=\textcolor{stringliteral}{'-->'}//outext//\textcolor{stringliteral}{' Tracers on the emission stack'}
419     \textcolor{keyword}{call }log%put(outext,.false.)
420     \textcolor{keyword}{call }self%setTracerMemory(ntrc)
\end{DoxyCode}
Here is the call graph for this function\+:
% FIG 0
\mbox{\Hypertarget{namespacesimulation__mod_acc5fa823c8dd599de8feda8988c224f2}\label{namespacesimulation__mod_acc5fa823c8dd599de8feda8988c224f2}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!settracermemory@{settracermemory}}
\index{settracermemory@{settracermemory}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{settracermemory()}{settracermemory()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::settracermemory (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self,  }\item[{integer, intent(in), optional}]{ntrc }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to account for Tracer memory consumption. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 457 of file simulation.\+f90.


\begin{DoxyCode}
457     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
458     \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{optional}, \textcolor{keywordtype}{intent(in)} :: ntrc
459     \textcolor{keywordtype}{integer} :: sizem, i
460     \textcolor{keywordtype}{type}(tracer\_class) :: dummyTracer
461     sizem = 0
462     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
463         sizem = sizem + sizeof(sblock(i)%LTracer) \textcolor{comment}{!this accounts for the array structure}
464         sizem = sizem + sizeof(dummytracer)*sblock(i)%LTracer%getSize() \textcolor{comment}{!this accounts for the contents}
465 \textcolor{keywordflow}{    enddo}
466     \textcolor{keyword}{call }simmemory%setracer(sizem)
467     \textcolor{keywordflow}{if}(\textcolor{keyword}{present}(ntrc)) \textcolor{keywordflow}{then}
468         \textcolor{keyword}{call }simmemory%setNtrc(ntrc)
469         \textcolor{keyword}{call }simmemory%setsizeTrc(sizeof(dummytracer))
470 \textcolor{keywordflow}{    end if}
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a87a5141e4516b9610a6e4f0d2ff2d719}\label{namespacesimulation__mod_a87a5141e4516b9610a6e4f0d2ff2d719}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!togglesources@{togglesources}}
\index{togglesources@{togglesources}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{togglesources()}{togglesources()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::togglesources (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to activate and deactivate Sources based on the GlobalsSim\+TimeCurr\+Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 212 of file simulation.\+f90.


\begin{DoxyCode}
212     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
213     \textcolor{keywordtype}{integer} :: i
214     \textcolor{keyword}{call }self%timerPrep%Tic()
215     \textcolor{comment}{!$OMP PARALLEL PRIVATE(i)}
216     \textcolor{comment}{!$OMP DO}
217     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(sblock)
218         \textcolor{keyword}{call }sblock(i)%ToogleBlockSources()
219 \textcolor{keywordflow}{    end do}
220     \textcolor{comment}{!$OMP END DO}
221     \textcolor{comment}{!$OMP END PARALLEL}
222     \textcolor{keyword}{call }self%timerPrep%Toc()
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a844f0fae91502f3fc79cc1223f55a86c}\label{namespacesimulation__mod_a844f0fae91502f3fc79cc1223f55a86c}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!updatesimdatetime@{updatesimdatetime}}
\index{updatesimdatetime@{updatesimdatetime}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{updatesimdatetime()}{updatesimdatetime()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::updatesimdatetime (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to update the date and time variables. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 366 of file simulation.\+f90.


\begin{DoxyCode}
366     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
367     \textcolor{keywordtype}{integer} :: i
368     \textcolor{keywordflow}{if} (globals%Sim%getnumdt() /= 1 ) \textcolor{keyword}{call }globals%SimTime%setCurrDateTime(globals%SimDefs%dt)
\end{DoxyCode}
