\hypertarget{namespacesimulation__mod}{}\section{simulation\+\_\+mod Module Reference}
\label{namespacesimulation__mod}\index{simulation\+\_\+mod@{simulation\+\_\+mod}}


Module to hold the simulation class and its methods.  


\subsection*{Data Types}
\begin{DoxyCompactItemize}
\item 
type \mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}
\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a73bd78c4ac76c51f1e10f5847c25c4df}{run}} (self)
\begin{DoxyCompactList}\small\item\em Simulation run method. Runs the initialized case main time cycle. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940}{initsimulation}} (self, casefilename, outpath)
\begin{DoxyCompactList}\small\item\em Simulation initialization method. Effectively builds and populates the simulation objects that will be used latter on. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a87a5141e4516b9610a6e4f0d2ff2d719}{togglesources}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to activate and deactivate Sources based on the GlobalSim\+Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a13aa0745f4601e3f418143dab2f18276}{blocksemitt}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to call the Blocks to emitt tracers at current Sim\+Time. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a447c6d709de6aa360a65d39d660e627b}{setinitialstate}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to distribute the Sources to the Blocks, allocate the respective Tracers and redistribute if needed. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_ab40f39c4bf37da066101f93b67ad9b26}{gettracertotals}} (self, alloc, active)
\begin{DoxyCompactList}\small\item\em Simulation method to count Tracer numbers. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_aba126a8e0575cabb3bef6ab395002b3c}{printtracertotals}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to count Tracer numbers. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a54a9a06a7259eb792b9b63d2658a4170}{settracermemory}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to account for Tracer memory consumption. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c}{decomposedomain}} (self)
\begin{DoxyCompactList}\small\item\em Simulation method to do domain decomposition and define the Blocks. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulation__mod_a4285722eaa589fa671233554b54c74f8}{closesimulation}} (self)
\begin{DoxyCompactList}\small\item\em Simulation finishing method. Closes output files and writes the final messages. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Module to hold the simulation class and its methods. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas 
\end{DoxyAuthor}


\subsection{Function/\+Subroutine Documentation}
\mbox{\Hypertarget{namespacesimulation__mod_a13aa0745f4601e3f418143dab2f18276}\label{namespacesimulation__mod_a13aa0745f4601e3f418143dab2f18276}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!blocksemitt@{blocksemitt}}
\index{blocksemitt@{blocksemitt}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{blocksemitt()}{blocksemitt()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::blocksemitt (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to call the Blocks to emitt tracers at current Sim\+Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 166 of file simulation.\+f90.


\begin{DoxyCode}
166         \textcolor{keywordtype}{implicit none}
167         \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
168         \textcolor{keywordtype}{integer} :: i
169         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(dblock)
170             \textcolor{keyword}{call }dblock(i)%CallEmitter()
171 \textcolor{keywordflow}{        enddo}        
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a4285722eaa589fa671233554b54c74f8}\label{namespacesimulation__mod_a4285722eaa589fa671233554b54c74f8}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!closesimulation@{closesimulation}}
\index{closesimulation@{closesimulation}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{closesimulation()}{closesimulation()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::closesimulation (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation finishing method. Closes output files and writes the final messages. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 319 of file simulation.\+f90.


\begin{DoxyCode}
319     \textcolor{keywordtype}{implicit none}
320     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
321     \textcolor{keywordtype}{type}(string) :: outext
322 
323     outext=\textcolor{stringliteral}{'Simulation ended, freeing resources. See you next time'}
324     \textcolor{keyword}{call }log%put(outext)
325     \textcolor{keyword}{call }log%finalize()
326 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c}\label{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!decomposedomain@{decomposedomain}}
\index{decomposedomain@{decomposedomain}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{decomposedomain()}{decomposedomain()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::decomposedomain (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to do domain decomposition and define the Blocks. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 295 of file simulation.\+f90.


\begin{DoxyCode}
295     \textcolor{keywordtype}{implicit none}
296     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
297     \textcolor{keywordtype}{type}(string) :: outext
298 
299     \textcolor{keywordflow}{if} (globals%SimDefs%autoblocksize) \textcolor{keywordflow}{then}
300         \textcolor{keyword}{call }allocblocks(globals%SimDefs%numblocks)
301     \textcolor{keywordflow}{else}
302         outext=\textcolor{stringliteral}{'[DecomposeDomain]: Only automatic Block sizing at the moment, stoping'}
303         \textcolor{keyword}{call }log%put(outext)
304         stop
305 \textcolor{keywordflow}{    end if}
306     \textcolor{comment}{! Initializing the Blocks}
307     \textcolor{keyword}{call }setblocks(globals%SimDefs%autoblocksize,globals%SimDefs%numblocks,self%nbx,self%nby)   
308 
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacesimulation__mod_a2b8198a9fb3f7671c6b45192a0b9740c_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacesimulation__mod_ab40f39c4bf37da066101f93b67ad9b26}\label{namespacesimulation__mod_ab40f39c4bf37da066101f93b67ad9b26}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!gettracertotals@{gettracertotals}}
\index{gettracertotals@{gettracertotals}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{gettracertotals()}{gettracertotals()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::gettracertotals (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self,  }\item[{integer, intent(out)}]{alloc,  }\item[{integer, intent(out)}]{active }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to count Tracer numbers. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 235 of file simulation.\+f90.


\begin{DoxyCode}
235     \textcolor{keywordtype}{implicit none}
236     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
237     \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(out)} :: alloc, active
238     \textcolor{keywordtype}{integer} :: i
239     alloc = 0
240     active = 0
241     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(dblock)
242         alloc = alloc + dblock(i)%numAllocTracers()
243         active = active + dblock(i)%numActiveTracers()
244 \textcolor{keywordflow}{    enddo}        
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940}\label{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!initsimulation@{initsimulation}}
\index{initsimulation@{initsimulation}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{initsimulation()}{initsimulation()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::initsimulation (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self,  }\item[{type(string), intent(in)}]{casefilename,  }\item[{type(string), intent(in)}]{outpath }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation initialization method. Effectively builds and populates the simulation objects that will be used latter on. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em casefilename,outpath} & \\
\hline
\mbox{\tt in}  & {\em casefilename} & case file name\\
\hline
\mbox{\tt in}  & {\em outpath} & Output path \\
\hline
\end{DoxyParams}


Definition at line 96 of file simulation.\+f90.


\begin{DoxyCode}
96     \textcolor{keywordtype}{implicit none}
97     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
98     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: casefilename
99     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: outpath
100     \textcolor{keywordtype}{type}(string) :: outext
101     \textcolor{keywordtype}{type}(vector) :: tempvec
102 
103     \textcolor{comment}{! Initialize logger}
104     \textcolor{keyword}{call }log%initialize(outpath)
105     \textcolor{comment}{!Print licences and build info}
106     \textcolor{keyword}{call }printlicpreamble
107 
108     \textcolor{comment}{!initializing memory log}
109     \textcolor{keyword}{call }simmemory%initialize()
110 
111     \textcolor{comment}{!setting every global variable and input parameter to their default}
112     \textcolor{keyword}{call }globals%initialize()
113     
114     \textcolor{comment}{!initializing geometry class}
115     \textcolor{keyword}{call }geometry%initialize()
116 
117     \textcolor{comment}{!Check if case file has .xml extension}
118     \textcolor{keywordflow}{if} (casefilename%extension() == \textcolor{stringliteral}{'.xml'}) \textcolor{keywordflow}{then}
119         \textcolor{comment}{! Initialization routines to build the simulation from the input case file}
120         \textcolor{keyword}{call }initfromxml(casefilename)
121     \textcolor{keywordflow}{else}
122         outext=\textcolor{stringliteral}{'[initSimulation]: only .xml input files are supported at the time. Stopping'}
123         \textcolor{keyword}{call }log%put(outext)
124         stop
125 \textcolor{keywordflow}{    endif}
126     \textcolor{comment}{!Case was read and now we can build/initialize our simulation objects that are case-dependent}
127 
128     \textcolor{comment}{!initilize simulation bounding box}
129     \textcolor{keyword}{call }bbox%initialize()
130     \textcolor{comment}{!decomposing the domain and initializing the Simulation Blocks}
131     \textcolor{keyword}{call }self%decompose()
132 
133     \textcolor{comment}{!Distributing Sources and trigerring Tracer allocation and distribution}
134     \textcolor{keyword}{call }self%setInitialState()
135 
136     \textcolor{comment}{!printing memory occupation at the time}
137     \textcolor{keyword}{call }simmemory%detailedprint()
138 
\end{DoxyCode}
Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{namespacesimulation__mod_aedbba2bb458cbcd7eb93938a5f7b5940_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{namespacesimulation__mod_aba126a8e0575cabb3bef6ab395002b3c}\label{namespacesimulation__mod_aba126a8e0575cabb3bef6ab395002b3c}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!printtracertotals@{printtracertotals}}
\index{printtracertotals@{printtracertotals}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{printtracertotals()}{printtracertotals()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::printtracertotals (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to count Tracer numbers. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 255 of file simulation.\+f90.


\begin{DoxyCode}
255     \textcolor{keywordtype}{implicit none}
256     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
257     \textcolor{keywordtype}{integer} :: alloc, active
258     \textcolor{keywordtype}{type}(string) :: outext, temp(2)
259     \textcolor{keyword}{call }self%getTracerTotals(alloc, active)
260     temp(1) = alloc
261     temp(2) = active
262     outext=\textcolor{stringliteral}{'-->'}//temp(1) //\textcolor{stringliteral}{' Tracers allocated, '}//temp(2) //\textcolor{stringliteral}{' Tracers active'}    
263     \textcolor{keyword}{call }log%put(outext,.false.)    
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a73bd78c4ac76c51f1e10f5847c25c4df}\label{namespacesimulation__mod_a73bd78c4ac76c51f1e10f5847c25c4df}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!run@{run}}
\index{run@{run}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{run()}{run()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::run (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation run method. Runs the initialized case main time cycle. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 62 of file simulation.\+f90.


\begin{DoxyCode}
62     \textcolor{keywordtype}{implicit none}
63     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
64     \textcolor{keywordtype}{type}(string) :: outext
65 
66     \textcolor{comment}{!main time cycle}
67     \textcolor{keywordflow}{do} \textcolor{keywordflow}{while} (globals%SimTime .lt. globals%Parameters%TimeMax)
68         \textcolor{comment}{!activate suitable Sources}
69         \textcolor{keyword}{call }self%ToggleSources()
70         \textcolor{comment}{!emitt Tracers from active Sources}
71         \textcolor{keyword}{call }self%BlocksEmitt()
72         \textcolor{comment}{!load hydrodynamic fields from files}
73         \textcolor{comment}{!interpolate fields to tracer coordinates}
74         \textcolor{comment}{!Update all tracers with base behavior}
75         \textcolor{comment}{!Update Tracers with type-specific behavior}
76         \textcolor{comment}{!Write results if time to do so}
77 
78         \textcolor{comment}{!update Simulation time}
79         globals%SimTime = globals%SimTime + globals%SimDefs%dt
80         \textcolor{comment}{!print*, 'Global time is ', Globals%SimTime }
81 \textcolor{keywordflow}{    enddo}
82 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a447c6d709de6aa360a65d39d660e627b}\label{namespacesimulation__mod_a447c6d709de6aa360a65d39d660e627b}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!setinitialstate@{setinitialstate}}
\index{setinitialstate@{setinitialstate}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{setinitialstate()}{setinitialstate()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::setinitialstate (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to distribute the Sources to the Blocks, allocate the respective Tracers and redistribute if needed. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 184 of file simulation.\+f90.


\begin{DoxyCode}
184     \textcolor{keywordtype}{implicit none}
185     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(inout)} :: self
186     \textcolor{keywordtype}{type}(string) :: outext, temp(2)
187     \textcolor{keywordtype}{integer} :: i, ix, iy, blk
188     \textcolor{keywordtype}{real(prec)} :: dx, dy
189     \textcolor{keywordtype}{type}(vector) :: coords
190     
191     \textcolor{comment}{!this is easy because all the blocks are the same}
192     dx = dblock(1)%extents%size%x
193     dy = dblock(1)%extents%size%y
194     \textcolor{comment}{!iterate every Source to distribute}
195     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(tempsources%src)
196         \textcolor{keyword}{call }geometry%getCenter(tempsources%src(i)%par%geometry, coords)
197         \textcolor{comment}{!finding the 2D coordinates of the corresponding Block}
198         ix = min(int((coords%x + bbox%offset%x)/dx) + 1, self%nbx)
199         iy = min(int((coords%y + bbox%offset%y)/dy) + 1, self%nby)
200         \textcolor{comment}{!print*, 'Source pt position'}
201         \textcolor{comment}{!print*, tempSources%src(i)%now%pos}
202         \textcolor{comment}{!print*, 'Source center position'}
203         \textcolor{comment}{!print*, coords}
204         \textcolor{comment}{!print*, 'Source grid position'}
205         \textcolor{comment}{!print*, ix, iy}
206         \textcolor{comment}{!Converting to the 1D index - Notice how the blocks were built in [Blocks::setBlocks]}
207         blk = 2*ix + iy -2
208         \textcolor{comment}{!print*, blk}
209         \textcolor{keywordflow}{if} (blk > \textcolor{keyword}{size}(dblock)) \textcolor{keywordflow}{then}
210             outext=\textcolor{stringliteral}{'[DistributeSources]: problem in getting correct Block index, stoping'}
211             \textcolor{keyword}{call }log%put(outext)
212             stop
213 \textcolor{keywordflow}{        end if}
214         \textcolor{keyword}{call }dblock(blk)%putSource(tempsources%src(i))
215 \textcolor{keywordflow}{    end do}
216     
217     \textcolor{keyword}{call }tempsources%finalize() \textcolor{comment}{!destroying the temporary Sources now they are shipped to the Blocks}
218     outext=\textcolor{stringliteral}{'-->Sources allocated to their current Blocks'}
219     \textcolor{keyword}{call }log%put(outext,.false.)
220     
221     \textcolor{keyword}{call }self%printTracerTotals()
222     \textcolor{keyword}{call }self%setTracerMemory()
223     
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a54a9a06a7259eb792b9b63d2658a4170}\label{namespacesimulation__mod_a54a9a06a7259eb792b9b63d2658a4170}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!settracermemory@{settracermemory}}
\index{settracermemory@{settracermemory}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{settracermemory()}{settracermemory()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::settracermemory (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to account for Tracer memory consumption. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 274 of file simulation.\+f90.


\begin{DoxyCode}
274     \textcolor{keywordtype}{implicit none}
275     \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
276     \textcolor{keywordtype}{integer} :: alloc, active
277     \textcolor{keywordtype}{integer} :: sizem, i
278     sizem = 0
279     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(dblock)
280         sizem = sizem + dblock(i)%Tracer%getMemSize() \textcolor{comment}{!this accounts for the array structure}
281         sizem = sizem + sizeof(dummytracer)*dblock(i)%Tracer%getLength() \textcolor{comment}{!this accounts for the contents}
282 \textcolor{keywordflow}{    enddo}  
283     \textcolor{keyword}{call }simmemory%addtracer(sizem)
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulation__mod_a87a5141e4516b9610a6e4f0d2ff2d719}\label{namespacesimulation__mod_a87a5141e4516b9610a6e4f0d2ff2d719}} 
\index{simulation\+\_\+mod@{simulation\+\_\+mod}!togglesources@{togglesources}}
\index{togglesources@{togglesources}!simulation\+\_\+mod@{simulation\+\_\+mod}}
\subsubsection{\texorpdfstring{togglesources()}{togglesources()}}
{\footnotesize\ttfamily subroutine simulation\+\_\+mod\+::togglesources (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulation__mod_1_1simulation__class}{simulation\+\_\+class}}), intent(in)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Simulation method to activate and deactivate Sources based on the GlobalSim\+Time. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 150 of file simulation.\+f90.


\begin{DoxyCode}
150         \textcolor{keywordtype}{implicit none}
151         \textcolor{keywordtype}{class}(simulation\_class), \textcolor{keywordtype}{intent(in)} :: self
152         \textcolor{keywordtype}{integer} :: i
153         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(dblock)
154             \textcolor{keyword}{call }dblock(i)%ToogleBlockSources()
155 \textcolor{keywordflow}{        enddo}        
\end{DoxyCode}
