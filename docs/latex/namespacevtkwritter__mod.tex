\hypertarget{namespacevtkwritter__mod}{}\section{vtkwritter\+\_\+mod Module Reference}
\label{namespacevtkwritter__mod}\index{vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}}


Defines a vtk writer class with an object exposable to the Output streamer. Writes files in .xml vtk, both in serial and parallel model. Uses an unstructured mesh format specifier to store any type of data, both meshes and Tracers. Supports scalar and vectorial data.  


\subsection*{Data Types}
\begin{DoxyCompactItemize}
\item 
type \mbox{\hyperlink{structvtkwritter__mod_1_1vtkwritter__class}{vtkwritter\+\_\+class}}
\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine \mbox{\hyperlink{namespacevtkwritter__mod_abd35d591c8e15730a277b2d26deb83e8}{initvtkwritter}} (self)
\begin{DoxyCompactList}\small\item\em Initializes a V\+TK writer object. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacevtkwritter__mod_ac11e4d1d71141e6de89ba67508212ce0}{tracerserial}} (self, filename, blocks)
\begin{DoxyCompactList}\small\item\em Public Tracer writting routine. Writes Tracer data in binary X\+ML V\+TK format using an unstructured grid. Serial writer for serial files. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacevtkwritter__mod_a9f44d9fd1c5da759c4f2d721d12a8181}{domain}} (self, filename, bbox, npbbox, blocks)
\begin{DoxyCompactList}\small\item\em Public simulation domain writting routine. Writes binary X\+ML V\+TK format using an unstructured grid. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
type(\mbox{\hyperlink{structvtkwritter__mod_1_1vtkwritter__class}{vtkwritter\+\_\+class}}), public \mbox{\hyperlink{namespacevtkwritter__mod_a80eabc5e7153822e7ddd54b662294c81}{vtkwritter}}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Defines a vtk writer class with an object exposable to the Output streamer. Writes files in .xml vtk, both in serial and parallel model. Uses an unstructured mesh format specifier to store any type of data, both meshes and Tracers. Supports scalar and vectorial data. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas 
\end{DoxyAuthor}


\subsection{Function/\+Subroutine Documentation}
\mbox{\Hypertarget{namespacevtkwritter__mod_a9f44d9fd1c5da759c4f2d721d12a8181}\label{namespacevtkwritter__mod_a9f44d9fd1c5da759c4f2d721d12a8181}} 
\index{vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}!domain@{domain}}
\index{domain@{domain}!vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}}
\subsubsection{\texorpdfstring{domain()}{domain()}}
{\footnotesize\ttfamily subroutine vtkwritter\+\_\+mod\+::domain (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structvtkwritter__mod_1_1vtkwritter__class}{vtkwritter\+\_\+class}}), intent(inout)}]{self,  }\item[{type(string), intent(in)}]{filename,  }\item[{class(\mbox{\hyperlink{structboundingbox__mod_1_1boundingbox__class}{boundingbox\+\_\+class}}), intent(in)}]{bbox,  }\item[{integer, intent(in)}]{npbbox,  }\item[{class(\mbox{\hyperlink{structblocks__mod_1_1block__class}{block\+\_\+class}}), dimension(\+:), intent(in)}]{blocks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Public simulation domain writting routine. Writes binary X\+ML V\+TK format using an unstructured grid. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,filename,bbox,npbbox,blocks} & \\
\hline
\mbox{\tt in}  & {\em filename} & name of the case to add\\
\hline
\mbox{\tt in}  & {\em bbox} & Case bounding box\\
\hline
\mbox{\tt in}  & {\em blocks} & Case Blocks\\
\hline
\mbox{\tt in}  & {\em npbbox} & number of points of the bbox geometry \\
\hline
\end{DoxyParams}


Definition at line 118 of file vtkwritter.\+f90.


\begin{DoxyCode}
118     \textcolor{keywordtype}{implicit none}
119     \textcolor{keywordtype}{class}(vtkwritter\_class), \textcolor{keywordtype}{intent(inout)} :: self
120     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: filename
121     \textcolor{keywordtype}{class}(boundingbox\_class), \textcolor{keywordtype}{intent(in)} :: bbox
122     \textcolor{keywordtype}{class}(block\_class), \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(in)} :: blocks
123     \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{intent(in)} :: npbbox
124     
125     \textcolor{keywordtype}{type}(vtk\_file) :: vtkfile
126     \textcolor{keywordtype}{type}(string) :: fullfilename
127     \textcolor{keywordtype}{type}(string) :: outext
128     \textcolor{keywordtype}{integer} :: error, i, b
129     \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{parameter} :: nc = 1
130     \textcolor{keywordtype}{real(prec)}, \textcolor{keywordtype}{dimension(1:npbbox)} :: xx, yy, zz
131     \textcolor{keywordtype}{type}(vector) :: pts(npbbox)
132     \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{dimension(1:npbbox)} :: connect, var
133     \textcolor{keywordtype}{integer(I4P)}, \textcolor{keywordtype}{dimension(1:nc)} :: offset
134     \textcolor{keywordtype}{integer(I1P)}, \textcolor{keywordtype}{dimension(1:nc)} :: cell\_type
135     
136     offset = [8]
137     cell\_type = [12]
138     
139     \textcolor{comment}{!preparing file}
140     fullfilename = filename%chars()//\textcolor{stringliteral}{'\_BoundingBox.vtu'}
141     outext = \textcolor{stringliteral}{'->Writting Bounding Box file '}//fullfilename
142     \textcolor{keyword}{call }log%put(outext)
143     fullfilename = globals%Names%outpath//\textcolor{stringliteral}{'/'}//fullfilename
144     
145     error = vtkfile%initialize(format=self%formatType%chars(), filename=fullfilename%chars(), mesh\_topology
      =\textcolor{stringliteral}{'UnstructuredGrid'})
146     
147     \textcolor{comment}{!Writting bounding box geometry}
148     pts = geometry%getPoints(bbox)
149     \textcolor{keywordflow}{do} i=1, npbbox
150         xx(i) = pts(i)%x
151         yy(i) = pts(i)%y
152         zz(i) = pts(i)%z
153         connect(i) = i-1
154 \textcolor{keywordflow}{    end do}    
155     error = vtkfile%xml\_writer%write\_piece(np=npbbox, nc=nc)
156     error = vtkfile%xml\_writer%write\_geo(np=npbbox, nc=nc, x=xx, y=yy, z=zz)
157     error = vtkfile%xml\_writer%write\_connectivity(nc=nc, connectivity=connect, offset=offset, cell\_type=
      cell\_type)
158     error = vtkfile%xml\_writer%write\_piece()
159     
160     \textcolor{comment}{!Closing file}
161     error = vtkfile%finalize()
162     
163     \textcolor{comment}{!preparing file}
164     fullfilename = filename%chars()//\textcolor{stringliteral}{'\_Blocks.vtu'}
165     outext = \textcolor{stringliteral}{'->Writting Blocks file '}//fullfilename
166     \textcolor{keyword}{call }log%put(outext)
167     fullfilename = globals%Names%outpath//\textcolor{stringliteral}{'/'}//fullfilename
168     
169     error = vtkfile%initialize(format=self%formatType%chars(), filename=fullfilename%chars(), mesh\_topology
      =\textcolor{stringliteral}{'UnstructuredGrid'})
170     
171     \textcolor{comment}{!Writting block geometries}
172     \textcolor{keywordflow}{do} b=1, \textcolor{keyword}{size}(blocks)
173         pts = geometry%getPoints(blocks(b)%extents)
174         \textcolor{keywordflow}{do} i=1, npbbox
175             xx(i) = pts(i)%x
176             yy(i) = pts(i)%y
177             \textcolor{comment}{!zz(i) = pts(i)%z}
178             connect(i) = i-1
179             var(i) = b
180 \textcolor{keywordflow}{        end do}    
181         error = vtkfile%xml\_writer%write\_piece(np=npbbox, nc=nc)
182         error = vtkfile%xml\_writer%write\_geo(np=npbbox, nc=nc, x=xx, y=yy, z=zz)
183         error = vtkfile%xml\_writer%write\_connectivity(nc=nc, connectivity=connect, offset=offset, cell\_type
      =cell\_type)
184         error = vtkfile%xml\_writer%write\_dataarray(location=\textcolor{stringliteral}{'node'}, action=\textcolor{stringliteral}{'open'})
185         error = vtkfile%xml\_writer%write\_dataarray(data\_name=\textcolor{stringliteral}{'Block'}, x=var)
186         error = vtkfile%xml\_writer%write\_dataarray(location=\textcolor{stringliteral}{'node'}, action=\textcolor{stringliteral}{'close'})
187         error = vtkfile%xml\_writer%write\_piece()
188 \textcolor{keywordflow}{    end do}
189         
190     \textcolor{comment}{!Closing file}
191     error = vtkfile%finalize()
192     
\end{DoxyCode}
\mbox{\Hypertarget{namespacevtkwritter__mod_abd35d591c8e15730a277b2d26deb83e8}\label{namespacevtkwritter__mod_abd35d591c8e15730a277b2d26deb83e8}} 
\index{vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}!initvtkwritter@{initvtkwritter}}
\index{initvtkwritter@{initvtkwritter}!vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}}
\subsubsection{\texorpdfstring{initvtkwritter()}{initvtkwritter()}}
{\footnotesize\ttfamily subroutine vtkwritter\+\_\+mod\+::initvtkwritter (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structvtkwritter__mod_1_1vtkwritter__class}{vtkwritter\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Initializes a V\+TK writer object. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 54 of file vtkwritter.\+f90.


\begin{DoxyCode}
54     \textcolor{keywordtype}{implicit none}
55     \textcolor{keywordtype}{class}(vtkwritter\_class), \textcolor{keywordtype}{intent(inout)} :: self
56     self%numVtkFiles = 0
57     self%formatType = \textcolor{stringliteral}{'raw'}
\end{DoxyCode}
\mbox{\Hypertarget{namespacevtkwritter__mod_ac11e4d1d71141e6de89ba67508212ce0}\label{namespacevtkwritter__mod_ac11e4d1d71141e6de89ba67508212ce0}} 
\index{vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}!tracerserial@{tracerserial}}
\index{tracerserial@{tracerserial}!vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}}
\subsubsection{\texorpdfstring{tracerserial()}{tracerserial()}}
{\footnotesize\ttfamily subroutine vtkwritter\+\_\+mod\+::tracerserial (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structvtkwritter__mod_1_1vtkwritter__class}{vtkwritter\+\_\+class}}), intent(inout)}]{self,  }\item[{type(string), intent(in)}]{filename,  }\item[{class(\mbox{\hyperlink{structblocks__mod_1_1block__class}{block\+\_\+class}}), dimension(\+:), intent(in)}]{blocks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Public Tracer writting routine. Writes Tracer data in binary X\+ML V\+TK format using an unstructured grid. Serial writer for serial files. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,filename,blocks} & \\
\hline
\mbox{\tt in}  & {\em blocks} & Case Blocks \\
\hline
\end{DoxyParams}


Definition at line 68 of file vtkwritter.\+f90.


\begin{DoxyCode}
68     \textcolor{keywordtype}{implicit none}
69     \textcolor{keywordtype}{class}(vtkwritter\_class), \textcolor{keywordtype}{intent(inout)} :: self
70     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: filename
71     \textcolor{keywordtype}{class}(block\_class), \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(in)} :: blocks
72     
73     \textcolor{keywordtype}{type}(vtk\_file) :: vtkfile
74     \textcolor{keywordtype}{type}(string) :: fullfilename
75     \textcolor{keywordtype}{type}(string) :: outext
76     \textcolor{keywordtype}{integer} :: error, i
77     \textcolor{keywordtype}{integer} :: np
78     \textcolor{keywordtype}{integer}, \textcolor{keywordtype}{parameter} :: nc = 0
79     \textcolor{keywordtype}{integer(I1P)}, \textcolor{keywordtype}{dimension(1:nc)} :: cell\_type
80     \textcolor{keywordtype}{integer(I4P)}, \textcolor{keywordtype}{dimension(1:nc)} :: offset
81     \textcolor{keywordtype}{integer(I4P)}, \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{allocatable} :: connect
82 
83     fullfilename = filename%chars()//\textcolor{stringliteral}{'.vtu'}
84     outext = \textcolor{stringliteral}{'->Writting output file '}//fullfilename
85     \textcolor{keyword}{call }log%put(outext)
86     fullfilename = globals%Names%outpath//\textcolor{stringliteral}{'/'}//fullfilename
87     
88     error = vtkfile%initialize(format=self%formatType%chars(), filename=fullfilename%chars(), mesh\_topology
      =\textcolor{stringliteral}{'UnstructuredGrid'})
89     \textcolor{comment}{!Write the data of each block}
90     \textcolor{keywordflow}{do} i = 1, \textcolor{keyword}{size}(blocks)
91         \textcolor{keywordflow}{if} (blocks(i)%LTracer%getSize() > 0) \textcolor{keywordflow}{then}
92             np = blocks(i)%LTracer%getSize()
93             \textcolor{keyword}{allocate}(connect(np))
94             error = vtkfile%xml\_writer%write\_piece(np=np, nc=nc)
95             error = vtkfile%xml\_writer%write\_geo(np=np, nc=nc, x=blocks(i)%AoT%x, y=blocks(i)%AoT%y, z=
      blocks(i)%AoT%z)
96             error = vtkfile%xml\_writer%write\_connectivity(nc=nc, connectivity=connect, offset=offset, 
      cell\_type=cell\_type)
97             error = vtkfile%xml\_writer%write\_dataarray(location=\textcolor{stringliteral}{'node'}, action=\textcolor{stringliteral}{'open'})
98             error = vtkfile%xml\_writer%write\_dataarray(data\_name=\textcolor{stringliteral}{'id'}, x=blocks(i)%AoT%id)
99             error = vtkfile%xml\_writer%write\_dataarray(data\_name=\textcolor{stringliteral}{'velocity'}, x=blocks(i)%AoT%u, y=blocks(i)
      %AoT%v, z=blocks(i)%AoT%w)
100             error = vtkfile%xml\_writer%write\_dataarray(location=\textcolor{stringliteral}{'node'}, action=\textcolor{stringliteral}{'close'})
101             error = vtkfile%xml\_writer%write\_piece()
102             \textcolor{keyword}{deallocate}(connect)
103 \textcolor{keywordflow}{        end if}
104 \textcolor{keywordflow}{    end do}
105     error = vtkfile%finalize()
106     self%numVtkFiles = self%numVtkFiles + 1
107     
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{namespacevtkwritter__mod_a80eabc5e7153822e7ddd54b662294c81}\label{namespacevtkwritter__mod_a80eabc5e7153822e7ddd54b662294c81}} 
\index{vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}!vtkwritter@{vtkwritter}}
\index{vtkwritter@{vtkwritter}!vtkwritter\+\_\+mod@{vtkwritter\+\_\+mod}}
\subsubsection{\texorpdfstring{vtkwritter}{vtkwritter}}
{\footnotesize\ttfamily type(\mbox{\hyperlink{structvtkwritter__mod_1_1vtkwritter__class}{vtkwritter\+\_\+class}}), public vtkwritter\+\_\+mod\+::vtkwritter}



Definition at line 41 of file vtkwritter.\+f90.


\begin{DoxyCode}
41     \textcolor{keywordtype}{type}(vtkwritter\_class) :: vtkWritter
\end{DoxyCode}
