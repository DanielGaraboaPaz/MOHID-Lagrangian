\hypertarget{namespacesimulationinputstreamer__mod}{}\section{simulationinputstreamer\+\_\+mod Module Reference}
\label{namespacesimulationinputstreamer__mod}\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}


Defines an input file reader class with an object exposable to the Simulation This class is in charge of selectig the correct reader for the selected input file format and controling the respective reader.  


\subsection*{Data Types}
\begin{DoxyCompactItemize}
\item 
type \mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}
\begin{DoxyCompactList}\small\item\em Input Streamer class. \end{DoxyCompactList}\item 
type \mbox{\hyperlink{structsimulationinputstreamer__mod_1_1inputfilemodel__class}{inputfilemodel\+\_\+class}}
\end{DoxyCompactItemize}
\subsection*{Functions/\+Subroutines}
\begin{DoxyCompactItemize}
\item 
subroutine \mbox{\hyperlink{namespacesimulationinputstreamer__mod_a9ebef1f85eeb213cf69ea18ca012e047}{setreadstatus}} (self, last\+Read\+Time, buffer\+Size)
\begin{DoxyCompactList}\small\item\em Checks if file should be read and sets appropriate flag. \end{DoxyCompactList}\item 
type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function \mbox{\hyperlink{namespacesimulationinputstreamer__mod_af1f989baa363031aac274694aeacfad5}{getcurrentsfile}} (self, file\+Name)
\begin{DoxyCompactList}\small\item\em instantiates and returns a background object with the data from a currents input file \end{DoxyCompactList}\item 
type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function \mbox{\hyperlink{namespacesimulationinputstreamer__mod_ac69aeed5ee36930444f6e5389071994e}{getwindsfile}} (self, file\+Name)
\begin{DoxyCompactList}\small\item\em instantiates and returns a background object with the data from a meteorology input file (winds) \end{DoxyCompactList}\item 
type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function \mbox{\hyperlink{namespacesimulationinputstreamer__mod_a28ca430c32786d6df906f295bedf54df}{getwavesfile}} (self, file\+Name)
\begin{DoxyCompactList}\small\item\em instantiates and returns a background object with the data from a waves input file (stokes drift velocity) \end{DoxyCompactList}\item 
type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function \mbox{\hyperlink{namespacesimulationinputstreamer__mod_a7e82619f63c76454a4ea97e3a0b4bc48}{getwaterpropsfile}} (self, file\+Name)
\begin{DoxyCompactList}\small\item\em instantiates and returns a background object with the data from a water properties input file (temperature, density, salinity) \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulationinputstreamer__mod_a3d4540f8e04cc0215895cad65c5be952}{loaddatafromstack}} (self, b\+Box, blocks)
\begin{DoxyCompactList}\small\item\em loads data from files and populates the backgrounds accordingly \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulationinputstreamer__mod_a9f81731f839f49c42a281c1334f528da}{initinputstreamer}} (self, blocks)
\begin{DoxyCompactList}\small\item\em Initializes the input writer object, imports metadata on input files. \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulationinputstreamer__mod_a9465e29f527366e5f6d9a1195de6ddee}{resetreadstatus}} (self)
\begin{DoxyCompactList}\small\item\em resets input files read status \end{DoxyCompactList}\item 
subroutine \mbox{\hyperlink{namespacesimulationinputstreamer__mod_a1b906bc5ba1fac8d846b30237216aca4}{printinputstreamer}} (self)
\begin{DoxyCompactList}\small\item\em Prints the input writer object and metadata on input files. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Defines an input file reader class with an object exposable to the Simulation This class is in charge of selectig the correct reader for the selected input file format and controling the respective reader. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas 
\end{DoxyAuthor}


\subsection{Function/\+Subroutine Documentation}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_af1f989baa363031aac274694aeacfad5}\label{namespacesimulationinputstreamer__mod_af1f989baa363031aac274694aeacfad5}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!getcurrentsfile@{getcurrentsfile}}
\index{getcurrentsfile@{getcurrentsfile}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{getcurrentsfile()}{getcurrentsfile()}}
{\footnotesize\ttfamily type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function simulationinputstreamer\+\_\+mod\+::getcurrentsfile (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(in)}]{self,  }\item[{type(string), intent(in)}]{file\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



instantiates and returns a background object with the data from a currents input file 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,file\+Name} & \\
\hline
\end{DoxyParams}


Definition at line 101 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
101     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(in)} :: self
102     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: fileName
103     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: varList
104     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: syntecticVar
105     \textcolor{keywordtype}{type}(ncReader\_class) :: ncReader
106 
107     \textcolor{keyword}{allocate}(varlist(5))
108     \textcolor{keyword}{allocate}(syntecticvar(5))
109     varlist(1) = globals%Var%u
110     syntecticvar(1) = .false.
111     varlist(2) = globals%Var%v
112     syntecticvar(2) = .false.
113     varlist(3) = globals%Var%w
114     syntecticvar(3) = .false.
115     varlist(4) = globals%Var%landIntMask
116     syntecticvar(4) = .true. 
117     varlist(5) = globals%Var%resolution
118     syntecticvar(5) = .true.
119 
120     \textcolor{comment}{!need to send to different readers here if different file formats}
121     getcurrentsfile = ncreader%getFullFile(filename, varlist, syntecticvar)
122     \textcolor{keyword}{call }getcurrentsfile%makeLandMaskField()
123     \textcolor{keyword}{call }getcurrentsfile%makeResolutionField()
124 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_a7e82619f63c76454a4ea97e3a0b4bc48}\label{namespacesimulationinputstreamer__mod_a7e82619f63c76454a4ea97e3a0b4bc48}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!getwaterpropsfile@{getwaterpropsfile}}
\index{getwaterpropsfile@{getwaterpropsfile}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{getwaterpropsfile()}{getwaterpropsfile()}}
{\footnotesize\ttfamily type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function simulationinputstreamer\+\_\+mod\+::getwaterpropsfile (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(in)}]{self,  }\item[{type(string), intent(in)}]{file\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



instantiates and returns a background object with the data from a water properties input file (temperature, density, salinity) 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,file\+Name} & \\
\hline
\end{DoxyParams}


Definition at line 187 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
187     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(in)} :: self
188     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: fileName
189     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: varList
190     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: syntecticVar
191     \textcolor{keywordtype}{type}(ncReader\_class) :: ncReader
192 
193     \textcolor{keyword}{allocate}(varlist(3))
194     \textcolor{keyword}{allocate}(syntecticvar(3))
195     varlist(1) = globals%Var%temp
196     syntecticvar(1) = .false.
197     varlist(2) = globals%Var%sal
198     syntecticvar(2) = .false.
199     varlist(3) = globals%Var%density
200     syntecticvar(3) = .false.
201 
202     \textcolor{comment}{!need to send to different readers here if different file formats}
203     getwaterpropsfile = ncreader%getFullFile(filename, varlist, syntecticvar)
204 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_a28ca430c32786d6df906f295bedf54df}\label{namespacesimulationinputstreamer__mod_a28ca430c32786d6df906f295bedf54df}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!getwavesfile@{getwavesfile}}
\index{getwavesfile@{getwavesfile}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{getwavesfile()}{getwavesfile()}}
{\footnotesize\ttfamily type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function simulationinputstreamer\+\_\+mod\+::getwavesfile (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(in)}]{self,  }\item[{type(string), intent(in)}]{file\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



instantiates and returns a background object with the data from a waves input file (stokes drift velocity) 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,file\+Name} & \\
\hline
\end{DoxyParams}


Definition at line 161 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
161     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(in)} :: self
162     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: fileName
163     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: varList
164     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: syntecticVar
165     \textcolor{keywordtype}{type}(ncReader\_class) :: ncReader
166 
167     \textcolor{keyword}{allocate}(varlist(2))
168     \textcolor{keyword}{allocate}(syntecticvar(2))
169     varlist(1) = globals%Var%vsdx
170     syntecticvar(1) = .false.
171     varlist(2) = globals%Var%vsdy
172     syntecticvar(2) = .false.
173 
174     \textcolor{comment}{!need to send to different readers here if different file formats}
175     getwavesfile = ncreader%getFullFile(filename, varlist, syntecticvar)
176 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_ac69aeed5ee36930444f6e5389071994e}\label{namespacesimulationinputstreamer__mod_ac69aeed5ee36930444f6e5389071994e}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!getwindsfile@{getwindsfile}}
\index{getwindsfile@{getwindsfile}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{getwindsfile()}{getwindsfile()}}
{\footnotesize\ttfamily type(\mbox{\hyperlink{structbackground__mod_1_1background__class}{background\+\_\+class}}) function simulationinputstreamer\+\_\+mod\+::getwindsfile (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(in)}]{self,  }\item[{type(string), intent(in)}]{file\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



instantiates and returns a background object with the data from a meteorology input file (winds) 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,file\+Name} & \\
\hline
\end{DoxyParams}


Definition at line 135 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
135     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(in)} :: self
136     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{intent(in)} :: fileName
137     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: varList
138     \textcolor{keywordtype}{logical}, \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: syntecticVar
139     \textcolor{keywordtype}{type}(ncReader\_class) :: ncReader
140 
141     \textcolor{keyword}{allocate}(varlist(2))
142     \textcolor{keyword}{allocate}(syntecticvar(2))
143     varlist(1) = globals%Var%u10
144     syntecticvar(1) = .false.
145     varlist(2) = globals%Var%v10
146     syntecticvar(2) = .false.
147 
148     \textcolor{comment}{!need to send to different readers here if different file formats}
149     getwindsfile = ncreader%getFullFile(filename, varlist, syntecticvar)
150 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_a9f81731f839f49c42a281c1334f528da}\label{namespacesimulationinputstreamer__mod_a9f81731f839f49c42a281c1334f528da}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!initinputstreamer@{initinputstreamer}}
\index{initinputstreamer@{initinputstreamer}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{initinputstreamer()}{initinputstreamer()}}
{\footnotesize\ttfamily subroutine simulationinputstreamer\+\_\+mod\+::initinputstreamer (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(inout)}]{self,  }\item[{type(\mbox{\hyperlink{structblocks__mod_1_1block__class}{block\+\_\+class}}), dimension(\+:), intent(inout)}]{blocks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Initializes the input writer object, imports metadata on input files. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,blocks} & \\
\hline
\mbox{\tt in,out}  & {\em blocks} & Case Blocks \\
\hline
\end{DoxyParams}


Definition at line 349 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
349     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(inout)} :: self
350     \textcolor{keywordtype}{type}(block\_class), \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(inout)} :: blocks
351     \textcolor{keywordtype}{type}(Node), \textcolor{keywordtype}{pointer} :: xmlInputs
352     \textcolor{keywordtype}{type}(Node), \textcolor{keywordtype}{pointer} :: typeNode
353     \textcolor{keywordtype}{type}(Node), \textcolor{keywordtype}{pointer} :: fileNode
354     \textcolor{keywordtype}{type}(NodeList), \textcolor{keywordtype}{pointer} :: fileList
355     \textcolor{keywordtype}{type}(string) :: tag, att\_name, att\_val
356     \textcolor{keywordtype}{type}(string), \textcolor{keywordtype}{allocatable}, \textcolor{keywordtype}{dimension(:)} :: fileNames
357     \textcolor{keywordtype}{integer} :: i, nBkg
358 
359     self%bufferSize = globals%Parameters%BufferSize
360     self%lastCurrentsReadTime = -1.0
361     self%lastWindsReadTime = -1.0
362     self%lastWavesReadTime = -1.0
363     self%nFileTypes = 0
364     self%currentsBkgIndex = 0
365     self%windsBkgIndex = 0
366     self%wavesBkgIndex = 0
367     nbkg = 0
368 
369     \textcolor{keyword}{call }xmlreader%getFile(xmlinputs,globals%Names%inputsXmlFilename, mandatory = .false.)
370     \textcolor{keywordflow}{if} (\textcolor{keyword}{associated}(xmlinputs)) \textcolor{keywordflow}{then}
371         self%useInputFiles = .true.
372         \textcolor{comment}{!Go to the file\_collection node}
373         tag = \textcolor{stringliteral}{"file\_collection"}
374         \textcolor{keyword}{call }xmlreader%gotoNode(xmlinputs,xmlinputs,tag)
375 
376         \textcolor{comment}{!For currents data}
377         tag = globals%DataTypes%currents
378         \textcolor{keyword}{call }xmlreader%gotoNode(xmlinputs,typenode,tag, mandatory=.false.)
379         \textcolor{keywordflow}{if} (\textcolor{keyword}{associated}(typenode)) \textcolor{keywordflow}{then}
380             filelist => getelementsbytagname(typenode, \textcolor{stringliteral}{"file"})
381             \textcolor{keyword}{allocate}(filenames(getlength(filelist)))
382             \textcolor{keyword}{allocate}(self%currentsInputFile(getlength(filelist)))
383             \textcolor{keywordflow}{do} i = 0, getlength(filelist) - 1
384                 filenode => item(filelist, i)
385                 tag=\textcolor{stringliteral}{"name"}
386                 att\_name=\textcolor{stringliteral}{"value"}
387                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, filenames(i+1))
388                 self%currentsInputFile(i+1)%name = filenames(i+1)
389                 tag=\textcolor{stringliteral}{"startTime"}
390                 att\_name=\textcolor{stringliteral}{"value"}
391                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
392                 self%currentsInputFile(i+1)%startTime = att\_val%to\_number(kind=1.\_r4p)
393                 tag=\textcolor{stringliteral}{"endTime"}
394                 att\_name=\textcolor{stringliteral}{"value"}
395                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
396                 self%currentsInputFile(i+1)%endTime = att\_val%to\_number(kind=1.\_r4p)
397                 self%currentsInputFile(i+1)%used = .false.
398 \textcolor{keywordflow}{            end do}
399             \textcolor{keyword}{deallocate}(filenames)
400             nbkg = nbkg + 1
401             self%currentsBkgIndex = nbkg
402 \textcolor{keywordflow}{        end if}
403 
404         \textcolor{comment}{!For wind data}
405         tag = globals%DataTypes%winds
406         \textcolor{keyword}{call }xmlreader%gotoNode(xmlinputs,typenode,tag, mandatory=.false.)
407         \textcolor{keywordflow}{if} (\textcolor{keyword}{associated}(typenode)) \textcolor{keywordflow}{then}
408             filelist => getelementsbytagname(typenode, \textcolor{stringliteral}{"file"})
409             \textcolor{keyword}{allocate}(filenames(getlength(filelist)))
410             \textcolor{keyword}{allocate}(self%windsInputFile(getlength(filelist)))
411             \textcolor{keywordflow}{do} i = 0, getlength(filelist) - 1
412                 filenode => item(filelist, i)
413                 tag=\textcolor{stringliteral}{"name"}
414                 att\_name=\textcolor{stringliteral}{"value"}
415                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, filenames(i+1))
416                 self%windsInputFile(i+1)%name = filenames(i+1)
417                 tag=\textcolor{stringliteral}{"startTime"}
418                 att\_name=\textcolor{stringliteral}{"value"}
419                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
420                 self%windsInputFile(i+1)%startTime = att\_val%to\_number(kind=1.\_r4p)
421                 tag=\textcolor{stringliteral}{"endTime"}
422                 att\_name=\textcolor{stringliteral}{"value"}
423                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
424                 self%windsInputFile(i+1)%endTime = att\_val%to\_number(kind=1.\_r4p)
425                 self%windsInputFile(i+1)%used = .false.
426 \textcolor{keywordflow}{            end do}
427             \textcolor{keyword}{deallocate}(filenames)
428             nbkg = nbkg + 1
429             self%windsBkgIndex = nbkg
430 \textcolor{keywordflow}{        end if}
431 
432         \textcolor{comment}{!For wave data}
433         tag = globals%DataTypes%waves
434         \textcolor{keyword}{call }xmlreader%gotoNode(xmlinputs,typenode,tag, mandatory=.false.)
435         \textcolor{keywordflow}{if} (\textcolor{keyword}{associated}(typenode)) \textcolor{keywordflow}{then}
436             filelist => getelementsbytagname(typenode, \textcolor{stringliteral}{"file"})
437             \textcolor{keyword}{allocate}(filenames(getlength(filelist)))
438             \textcolor{keyword}{allocate}(self%wavesInputFile(getlength(filelist)))
439             \textcolor{keywordflow}{do} i = 0, getlength(filelist) - 1
440                 filenode => item(filelist, i)
441                 tag=\textcolor{stringliteral}{"name"}
442                 att\_name=\textcolor{stringliteral}{"value"}
443                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, filenames(i+1))
444                 self%wavesInputFile(i+1)%name = filenames(i+1)
445                 tag=\textcolor{stringliteral}{"startTime"}
446                 att\_name=\textcolor{stringliteral}{"value"}
447                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
448                 self%wavesInputFile(i+1)%startTime = att\_val%to\_number(kind=1.\_r4p)
449                 tag=\textcolor{stringliteral}{"endTime"}
450                 att\_name=\textcolor{stringliteral}{"value"}
451                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
452                 self%wavesInputFile(i+1)%endTime = att\_val%to\_number(kind=1.\_r4p)
453                 self%wavesInputFile(i+1)%used = .false.
454 \textcolor{keywordflow}{            end do}
455             nbkg = nbkg + 1
456             self%wavesBkgIndex = nbkg
457 \textcolor{keywordflow}{        end if}
458         
459         \textcolor{comment}{!For water properties data}
460         tag = globals%DataTypes%waterProps
461         \textcolor{keyword}{call }xmlreader%gotoNode(xmlinputs,typenode,tag, mandatory=.false.)
462         \textcolor{keywordflow}{if} (\textcolor{keyword}{associated}(typenode)) \textcolor{keywordflow}{then}
463             filelist => getelementsbytagname(typenode, \textcolor{stringliteral}{"file"})
464             \textcolor{keyword}{allocate}(filenames(getlength(filelist)))
465             \textcolor{keyword}{allocate}(self%waterPropsInputFile(getlength(filelist)))
466             \textcolor{keywordflow}{do} i = 0, getlength(filelist) - 1
467                 filenode => item(filelist, i)
468                 tag=\textcolor{stringliteral}{"name"}
469                 att\_name=\textcolor{stringliteral}{"value"}
470                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, filenames(i+1))
471                 self%waterPropsInputFile(i+1)%name = filenames(i+1)
472                 tag=\textcolor{stringliteral}{"startTime"}
473                 att\_name=\textcolor{stringliteral}{"value"}
474                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
475                 self%waterPropsInputFile(i+1)%startTime = att\_val%to\_number(kind=1.\_r4p)
476                 tag=\textcolor{stringliteral}{"endTime"}
477                 att\_name=\textcolor{stringliteral}{"value"}
478                 \textcolor{keyword}{call }xmlreader%getNodeAttribute(filenode, tag, att\_name, att\_val)
479                 self%waterPropsInputFile(i+1)%endTime = att\_val%to\_number(kind=1.\_r4p)
480                 self%waterPropsInputFile(i+1)%used = .false.
481 \textcolor{keywordflow}{            end do}
482             nbkg = nbkg + 1
483             self%waterPropsBkgIndex = nbkg
484 \textcolor{keywordflow}{        end if}
485         
486     \textcolor{keywordflow}{else}
487         self%useInputFiles = .false.
488 \textcolor{keywordflow}{    end if}
489     \textcolor{comment}{!allocating the necessary background array in every block}
490     \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(blocks)
491         \textcolor{keyword}{allocate}(blocks(i)%Background(nbkg))
492 \textcolor{keywordflow}{    end do}
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_a3d4540f8e04cc0215895cad65c5be952}\label{namespacesimulationinputstreamer__mod_a3d4540f8e04cc0215895cad65c5be952}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!loaddatafromstack@{loaddatafromstack}}
\index{loaddatafromstack@{loaddatafromstack}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{loaddatafromstack()}{loaddatafromstack()}}
{\footnotesize\ttfamily subroutine simulationinputstreamer\+\_\+mod\+::loaddatafromstack (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(inout)}]{self,  }\item[{type(\mbox{\hyperlink{structboundingbox__mod_1_1boundingbox__class}{boundingbox\+\_\+class}}), intent(in)}]{b\+Box,  }\item[{type(\mbox{\hyperlink{structblocks__mod_1_1block__class}{block\+\_\+class}}), dimension(\+:), intent(inout)}]{blocks }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



loads data from files and populates the backgrounds accordingly 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,bbox,blocks} & \\
\hline
\mbox{\tt in}  & {\em bbox} & Case bounding box\\
\hline
\mbox{\tt in,out}  & {\em blocks} & Case Blocks \\
\hline
\end{DoxyParams}


Definition at line 214 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
214     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(inout)} :: self
215     \textcolor{keywordtype}{type}(boundingbox\_class), \textcolor{keywordtype}{intent(in)} :: bBox
216     \textcolor{keywordtype}{type}(block\_class), \textcolor{keywordtype}{dimension(:)}, \textcolor{keywordtype}{intent(inout)} :: blocks
217     \textcolor{keywordtype}{type}(background\_class) :: tempBkgd, tempBkgd2, tempBkgd3
218     \textcolor{keywordtype}{integer} :: i, j, k
219     \textcolor{keywordtype}{integer} :: fNumber
220     \textcolor{keywordtype}{real(prec)} :: tempTime(2)
221     \textcolor{keywordtype}{logical} :: appended
222 
223     \textcolor{keywordflow}{if} (self%useInputFiles) \textcolor{keywordflow}{then}
224         \textcolor{keyword}{call }self%resetReadStatus()
225         \textcolor{comment}{!check what files on the stack are to read to backgrounds}
226         \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%currentsInputFile)) \textcolor{keywordflow}{then}
227             \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%currentsInputFile)
228                 \textcolor{keyword}{call }self%currentsInputFile(i)%setReadStatus(self%lastCurrentsReadTime, self%BufferSize)
229 \textcolor{keywordflow}{            end do}
230 \textcolor{keywordflow}{        end if}
231         \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%windsInputFile)) \textcolor{keywordflow}{then}
232             \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%windsInputFile)
233                 \textcolor{keyword}{call }self%windsInputFile(i)%setReadStatus(self%lastWindsReadTime, self%BufferSize)
234 \textcolor{keywordflow}{            end do}
235 \textcolor{keywordflow}{        end if}
236         \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%wavesInputFile)) \textcolor{keywordflow}{then}
237             \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%wavesInputFile)
238                 \textcolor{keyword}{call }self%wavesInputFile(i)%setReadStatus(self%lastWavesReadTime, self%BufferSize)
239 \textcolor{keywordflow}{            end do}
240 \textcolor{keywordflow}{        end if}
241         \textcolor{comment}{!read selected files}
242         \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%currentsInputFile)) \textcolor{keywordflow}{then}
243             \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%currentsInputFile)
244                 \textcolor{keywordflow}{if} (self%currentsInputFile(i)%toRead) \textcolor{keywordflow}{then}
245                     \textcolor{comment}{!import data to temporary background}
246                     tempbkgd = self%getCurrentsFile(self%currentsInputFile(i)%name)
247                     self%currentsInputFile(i)%used = .true.
248                     \textcolor{keywordflow}{do} j=1, \textcolor{keyword}{size}(blocks)
249                         \textcolor{comment}{!slice data by block and either join to existing background or add a new one       
                       }
250                         \textcolor{keywordflow}{if} (blocks(j)%Background(self%currentsBkgIndex)%initialized) \textcolor{keywordflow}{then}
251                             tempbkgd2 = tempbkgd%getHyperSlab(blocks(j)%extents)
252                             \textcolor{keyword}{call }blocks(j)%Background(self%currentsBkgIndex)%append(tempbkgd2, appended)
253                             \textcolor{keyword}{call }tempbkgd2%finalize()
254 \textcolor{keywordflow}{                        end if}
255                         \textcolor{keywordflow}{if} (.not.blocks(j)%Background(self%currentsBkgIndex)%initialized) blocks(j)
      %Background(self%currentsBkgIndex) = tempbkgd%getHyperSlab(blocks(j)%extents)
256                         \textcolor{comment}{!save last time already loaded}
257                         temptime = blocks(j)%Background(self%currentsBkgIndex)%getDimExtents(globals%Var
      %time)
258                         \textcolor{keywordflow}{if} (self%lastCurrentsReadTime == -1.0) self%lastCurrentsReadTime = temptime(2)
259                         self%lastCurrentsReadTime = min(temptime(2), self%lastCurrentsReadTime)
260 \textcolor{keywordflow}{                    end do}
261                     \textcolor{comment}{!clean out the temporary background data}
262                     \textcolor{keyword}{call }tempbkgd%finalize()
263 \textcolor{keywordflow}{                end if}
264 \textcolor{keywordflow}{            end do}
265 \textcolor{keywordflow}{        end if}
266         \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%windsInputFile)) \textcolor{keywordflow}{then}
267             \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%windsInputFile)
268                 \textcolor{keywordflow}{if} (self%windsInputFile(i)%toRead) \textcolor{keywordflow}{then}
269                     \textcolor{comment}{!import data to temporary background}
270                     tempbkgd = self%getWindsFile(self%windsInputFile(i)%name)
271                     self%windsInputFile(i)%used = .true.
272                     \textcolor{keywordflow}{do} j=1, \textcolor{keyword}{size}(blocks)
273                         \textcolor{comment}{!slice data by block and either join to existing background or add a new one}
274                         \textcolor{keywordflow}{if} (blocks(j)%Background(self%windsBkgIndex)%initialized) \textcolor{keywordflow}{then}
275                             tempbkgd2 = tempbkgd%getHyperSlab(blocks(j)%extents)
276                             \textcolor{keyword}{call }blocks(j)%Background(self%windsBkgIndex)%append(tempbkgd2, appended)
277                             \textcolor{keyword}{call }tempbkgd2%finalize()
278 \textcolor{keywordflow}{                        end if}
279                         \textcolor{keywordflow}{if} (.not.blocks(j)%Background(self%windsBkgIndex)%initialized) blocks(j)%Background
      (self%windsBkgIndex) = tempbkgd%getHyperSlab(blocks(j)%extents)
280                         \textcolor{comment}{!save last time already loaded}
281                         temptime = blocks(j)%Background(self%windsBkgIndex)%getDimExtents(globals%Var%time)
282                         \textcolor{keywordflow}{if} (self%lastWindsReadTime == -1.0) self%lastWindsReadTime = temptime(2)
283                         self%lastWindsReadTime = min(temptime(2), self%lastWindsReadTime)
284 \textcolor{keywordflow}{                    end do}
285                     \textcolor{comment}{!clean out the temporary background data}
286                     \textcolor{keyword}{call }tempbkgd%finalize()
287 \textcolor{keywordflow}{                end if}
288 \textcolor{keywordflow}{            end do}
289 \textcolor{keywordflow}{        end if}
290         \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%wavesInputFile)) \textcolor{keywordflow}{then}
291             \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%wavesInputFile)
292                 \textcolor{keywordflow}{if} (self%wavesInputFile(i)%toRead) \textcolor{keywordflow}{then}
293                     \textcolor{comment}{!import data to temporary background}
294                     tempbkgd = self%getWavesFile(self%wavesInputFile(i)%name)
295                     self%wavesInputFile(i)%used = .true.
296                     \textcolor{keywordflow}{do} j=1, \textcolor{keyword}{size}(blocks)
297                         \textcolor{comment}{!slice data by block and either join to existing background or add a new one}
298                         \textcolor{keywordflow}{if} (blocks(j)%Background(self%wavesBkgIndex)%initialized) \textcolor{keywordflow}{then}
299                             tempbkgd2 = tempbkgd%getHyperSlab(blocks(j)%extents)
300                             \textcolor{keyword}{call }blocks(j)%Background(self%wavesBkgIndex)%append(tempbkgd2, appended)
301                             \textcolor{keyword}{call }tempbkgd2%finalize()
302 \textcolor{keywordflow}{                        end if}
303                         \textcolor{keywordflow}{if} (.not.blocks(j)%Background(self%wavesBkgIndex)%initialized) blocks(j)%Background
      (self%wavesBkgIndex) = tempbkgd%getHyperSlab(blocks(j)%extents)
304                         \textcolor{comment}{!save last time already loaded}
305                         temptime = blocks(j)%Background(self%wavesBkgIndex)%getDimExtents(globals%Var%time)
306                         \textcolor{keywordflow}{if} (self%lastWavesReadTime == -1.0) self%lastWavesReadTime = temptime(2)
307                         self%lastWavesReadTime = min(temptime(2), self%lastWavesReadTime)
308 \textcolor{keywordflow}{                    end do}
309                     \textcolor{comment}{!clean out the temporary background data}
310                     \textcolor{keyword}{call }tempbkgd%finalize()
311 \textcolor{keywordflow}{                end if}
312 \textcolor{keywordflow}{            end do}
313 \textcolor{keywordflow}{        end if}
314         \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%waterPropsInputFile)) \textcolor{keywordflow}{then}
315             \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%waterPropsInputFile)
316                 \textcolor{keywordflow}{if} (self%waterPropsInputFile(i)%toRead) \textcolor{keywordflow}{then}
317                     \textcolor{comment}{!import data to temporary background}
318                     tempbkgd = self%getWaterPropsFile(self%waterPropsInputFile(i)%name)
319                     self%waterPropsInputFile(i)%used = .true.
320                     \textcolor{keywordflow}{do} j=1, \textcolor{keyword}{size}(blocks)
321                         \textcolor{comment}{!slice data by block and either join to existing background or add a new one}
322                         \textcolor{keywordflow}{if} (blocks(j)%Background(self%waterPropsBkgIndex)%initialized) \textcolor{keywordflow}{then}
323                             tempbkgd2 = tempbkgd%getHyperSlab(blocks(j)%extents)
324                             \textcolor{keyword}{call }blocks(j)%Background(self%waterPropsBkgIndex)%append(tempbkgd2, appended)
325                             \textcolor{keyword}{call }tempbkgd2%finalize()
326 \textcolor{keywordflow}{                        end if}
327                         \textcolor{keywordflow}{if} (.not.blocks(j)%Background(self%waterPropsBkgIndex)%initialized) blocks(j)
      %Background(self%waterPropsBkgIndex) = tempbkgd%getHyperSlab(blocks(j)%extents)
328                         \textcolor{comment}{!save last time already loaded}
329                         temptime = blocks(j)%Background(self%waterPropsBkgIndex)%getDimExtents(globals%Var
      %time)
330                         \textcolor{keywordflow}{if} (self%lastWaterPropsReadTime == -1.0) self%lastWaterPropsReadTime = temptime(2)
331                         self%lastWaterPropsReadTime = min(temptime(2), self%lastWaterPropsReadTime)
332 \textcolor{keywordflow}{                    end do}
333                     \textcolor{comment}{!clean out the temporary background data}
334                     \textcolor{keyword}{call }tempbkgd%finalize()
335 \textcolor{keywordflow}{                end if}
336 \textcolor{keywordflow}{            end do}
337 \textcolor{keywordflow}{        end if}
338 \textcolor{keywordflow}{    end if}
339 
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_a1b906bc5ba1fac8d846b30237216aca4}\label{namespacesimulationinputstreamer__mod_a1b906bc5ba1fac8d846b30237216aca4}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!printinputstreamer@{printinputstreamer}}
\index{printinputstreamer@{printinputstreamer}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{printinputstreamer()}{printinputstreamer()}}
{\footnotesize\ttfamily subroutine simulationinputstreamer\+\_\+mod\+::printinputstreamer (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(in)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Prints the input writer object and metadata on input files. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 526 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
526     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(in)} :: self
527     \textcolor{keywordtype}{type}(string) :: outext, temp\_str
528     \textcolor{keywordtype}{integer} :: i
529     \textcolor{keywordtype}{logical} :: written
530     written = .false.
531     outext = \textcolor{stringliteral}{'-->Input streamer stack:'}//new\_line(\textcolor{stringliteral}{'a'})
532     \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%currentsInputFile)) \textcolor{keywordflow}{then}
533         outext = outext//\textcolor{stringliteral}{'--->'}//globals%DataTypes%currents%startcase()//\textcolor{stringliteral}{' data '}
534         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%currentsInputFile)
535             outext = outext//new\_line(\textcolor{stringliteral}{'a'})
536             outext = outext//\textcolor{stringliteral}{'---->File '}//self%currentsInputFile(i)%name
537 \textcolor{keywordflow}{        end do}
538         written = .true.
539 \textcolor{keywordflow}{    end if}
540     \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%windsInputFile)) \textcolor{keywordflow}{then}
541         \textcolor{keywordflow}{if} (written) outext = outext//new\_line(\textcolor{stringliteral}{'a'})
542         outext = outext//\textcolor{stringliteral}{'--->'}//globals%DataTypes%winds%startcase()//\textcolor{stringliteral}{' data '}
543         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%windsInputFile)
544             outext = outext//new\_line(\textcolor{stringliteral}{'a'})
545             outext = outext//\textcolor{stringliteral}{'---->File '}//self%windsInputFile(i)%name
546 \textcolor{keywordflow}{        end do}
547         written = .true.
548 \textcolor{keywordflow}{    end if}
549     \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%wavesInputFile)) \textcolor{keywordflow}{then}
550         \textcolor{keywordflow}{if} (written) outext = outext//new\_line(\textcolor{stringliteral}{'a'})
551         outext = outext//\textcolor{stringliteral}{'--->'}//globals%DataTypes%waves%startcase()//\textcolor{stringliteral}{' data '}
552         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%wavesInputFile)
553             outext = outext//new\_line(\textcolor{stringliteral}{'a'})
554             outext = outext//\textcolor{stringliteral}{'---->File '}//self%wavesInputFile(i)%name
555 \textcolor{keywordflow}{        end do}
556 \textcolor{keywordflow}{    end if}
557     \textcolor{keywordflow}{if} (.not.self%useInputFiles) outext = \textcolor{stringliteral}{'-->Input streamer stack is empty, no input data'}
558     \textcolor{keyword}{call }log%put(outext,.false.)
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_a9465e29f527366e5f6d9a1195de6ddee}\label{namespacesimulationinputstreamer__mod_a9465e29f527366e5f6d9a1195de6ddee}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!resetreadstatus@{resetreadstatus}}
\index{resetreadstatus@{resetreadstatus}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{resetreadstatus()}{resetreadstatus()}}
{\footnotesize\ttfamily subroutine simulationinputstreamer\+\_\+mod\+::resetreadstatus (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1input__streamer__class}{input\+\_\+streamer\+\_\+class}}), intent(inout)}]{self }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



resets input files read status 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}


Definition at line 501 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
501     \textcolor{keywordtype}{class}(input\_streamer\_class), \textcolor{keywordtype}{intent(inout)} :: self
502     \textcolor{keywordtype}{integer} :: i
503     \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%currentsInputFile)) \textcolor{keywordflow}{then}
504         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%currentsInputFile)
505             self%currentsInputFile(i)%toRead = .false.
506 \textcolor{keywordflow}{        end do}
507 \textcolor{keywordflow}{    end if}
508     \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%windsInputFile)) \textcolor{keywordflow}{then}
509         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%windsInputFile)
510             self%windsInputFile(i)%toRead = .false.
511 \textcolor{keywordflow}{        end do}
512 \textcolor{keywordflow}{    end if}
513     \textcolor{keywordflow}{if} (\textcolor{keyword}{allocated}(self%wavesInputFile)) \textcolor{keywordflow}{then}
514         \textcolor{keywordflow}{do} i=1, \textcolor{keyword}{size}(self%wavesInputFile)
515             self%wavesInputFile(i)%toRead = .false.
516 \textcolor{keywordflow}{        end do}
517 \textcolor{keywordflow}{    end if}
\end{DoxyCode}
\mbox{\Hypertarget{namespacesimulationinputstreamer__mod_a9ebef1f85eeb213cf69ea18ca012e047}\label{namespacesimulationinputstreamer__mod_a9ebef1f85eeb213cf69ea18ca012e047}} 
\index{simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}!setreadstatus@{setreadstatus}}
\index{setreadstatus@{setreadstatus}!simulationinputstreamer\+\_\+mod@{simulationinputstreamer\+\_\+mod}}
\subsubsection{\texorpdfstring{setreadstatus()}{setreadstatus()}}
{\footnotesize\ttfamily subroutine simulationinputstreamer\+\_\+mod\+::setreadstatus (\begin{DoxyParamCaption}\item[{class(\mbox{\hyperlink{structsimulationinputstreamer__mod_1_1inputfilemodel__class}{inputfilemodel\+\_\+class}}), intent(inout)}]{self,  }\item[{real(prec), intent(in)}]{last\+Read\+Time,  }\item[{real(prec), intent(in)}]{buffer\+Size }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Checks if file should be read and sets appropriate flag. 

\begin{DoxyAuthor}{Author}
Ricardo Birjukovs Canelas -\/ M\+A\+R\+E\+T\+EC 
\end{DoxyAuthor}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em self,last\+Read\+Time,buffer\+Size} & \\
\hline
\end{DoxyParams}


Definition at line 82 of file simulation\+Input\+Streamer.\+f90.


\begin{DoxyCode}
82     \textcolor{keywordtype}{class}(inputFileModel\_class), \textcolor{keywordtype}{intent(inout)} :: self
83     \textcolor{keywordtype}{real(prec)}, \textcolor{keywordtype}{intent(in)} :: lastReadTime
84     \textcolor{keywordtype}{real(prec)}, \textcolor{keywordtype}{intent(in)} :: bufferSize
85     \textcolor{keywordflow}{if} (self%endTime >= globals%SimTime%CurrTime) \textcolor{keywordflow}{then}
86         \textcolor{keywordflow}{if} (self%startTime <= globals%SimTime%CurrTime + buffersize) \textcolor{keywordflow}{then}
87             \textcolor{keywordflow}{if} (.not.self%used) self%toRead = .true.
88             \textcolor{keywordflow}{if} (lastreadtime >= self%endTime) self%toRead = .false.
89 \textcolor{keywordflow}{        end if}
90 \textcolor{keywordflow}{    end if}
\end{DoxyCode}
